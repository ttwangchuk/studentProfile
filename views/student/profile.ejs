<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Profile - Sherubtse College</title>
  <link rel="stylesheet" href="/css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="header">
      <div class="header-content">
          <div class="logo-section">
              <img src="/img/logo.jpg" alt="Sherubtse College Logo" class="logo">
              <div>
                  <div class="logo-text">Sherubtse College</div>
                  <div class="college-subtitle">Student Profile</div>
              </div>
          </div>
          <nav class="nav-links">
              <a href="/student/dashboard" class="nav-btn">Dashboard</a>
              <a href="/student/profile" class="nav-btn">Profile</a>
              <a href="/logout" class="nav-btn">Logout</a>
          </nav>
      </div>
  </header>

  <div class="main-content">
      <div class="fade-in-up">
          <h1 style="margin-bottom: 2rem; color: var(--gray-900);">My Profile</h1>

          <% if (message) { %>
              <div class="alert alert-<%= message.includes('Error') || message.includes('already exists') ? 'error' : 'success' %>">
                  <%= message %>
              </div>
          <% } %>

          <form action="/student/profile" method="POST">
              <div class="grid grid-2">
                  <!-- Personal Information -->
                  <div class="card">
                      <div class="card-header">
                          <h3 class="card-title">Personal Information</h3>
                      </div>
                      <div class="card-body">
                          <div class="form-group">
                              <label for="student_id" class="form-label">Student ID *</label>
                              <input type="text" id="student_id" name="student_id" class="form-input" 
                                     value="<%= student ? student.student_id : '' %>" 
                                     placeholder="Enter your student ID" required>
                              <small style="color: var(--gray-600); font-size: 0.875rem;">
                                  Enter your official student ID provided by the college
                              </small>
                          </div>

                          <div class="form-grid">
                              <div class="form-group">
                                  <label for="first_name" class="form-label">First Name *</label>
                                  <input type="text" id="first_name" name="first_name" class="form-input" 
                                         value="<%= student ? student.first_name : '' %>" 
                                         placeholder="First name" required>
                              </div>

                              <div class="form-group">
                                  <label for="last_name" class="form-label">Last Name *</label>
                                  <input type="text" id="last_name" name="last_name" class="form-input" 
                                         value="<%= student ? student.last_name : '' %>" 
                                         placeholder="Last name" required>
                              </div>
                          </div>

                          <div class="form-grid">
                              <div class="form-group">
                                  <label for="date_of_birth" class="form-label">Date of Birth</label>
                                  <input type="date" id="date_of_birth" name="date_of_birth" class="form-input" 
                                         value="<%= student && student.date_of_birth ? student.date_of_birth.toISOString().split('T')[0] : '' %>">
                              </div>

                              <div class="form-group">
                                  <label for="gender" class="form-label">Gender</label>
                                  <select id="gender" name="gender" class="form-select">
                                      <option value="">Select gender</option>
                                      <option value="Male" <%= student && student.gender === 'Male' ? 'selected' : '' %>>Male</option>
                                      <option value="Female" <%= student && student.gender === 'Female' ? 'selected' : '' %>>Female</option>
                                      <option value="Other" <%= student && student.gender === 'Other' ? 'selected' : '' %>>Other</option>
                                  </select>
                              </div>
                          </div>

                          <div class="form-group">
                              <label for="phone" class="form-label">Phone Number</label>
                              <input type="tel" id="phone" name="phone" class="form-input" 
                                     value="<%= student ? student.phone : '' %>" 
                                     placeholder="Enter phone number">
                          </div>

                          <div class="form-group">
                              <label for="address" class="form-label">Address</label>
                              <textarea id="address" name="address" class="form-textarea" 
                                        placeholder="Enter your address"><%= student ? student.address : '' %></textarea>
                          </div>

                          <div class="form-group">
                              <label for="profile_image" class="form-label">Profile Image URL</label>
                              <input type="url" id="profile_image" name="profile_image" class="form-input" 
                                     value="<%= student ? student.profile_image : '' %>" 
                                     placeholder="Enter image URL">
                          </div>
                      </div>
                  </div>

                  <!-- Academic & Parent/Guardian Information -->
                  <div class="card">
                      <div class="card-header">
                          <h3 class="card-title">Academic Information</h3>
                      </div>
                      <div class="card-body">
                          <div class="form-group">
                              <label for="department" class="form-label">Department</label>
                              <select id="department" name="department" class="form-select">
                                  <option value="">Select department</option>
                                  <option value="Department of Science" <%= student && student.department === 'Department of Science' ? 'selected' : '' %>>Department of Science</option>
                                  <option value="Department of Arts & Humanities" <%= student && student.department === 'Department of Arts & Humanities' ? 'selected' : '' %>>Department of Arts & Humanities</option>
                                  <option value="Department of Commerce" <%= student && student.department === 'Department of Commerce' ? 'selected' : '' %>>Department of Commerce</option>
                                  <option value="Department of Education" <%= student && student.department === 'Department of Education' ? 'selected' : '' %>>Department of Education</option>
                              </select>
                          </div>

                          <div class="form-group">
                              <label for="program" class="form-label">Program</label>
                              <input type="text" id="program" name="program" class="form-input" 
                                     value="<%= student ? student.program : '' %>" 
                                     placeholder="e.g., Bachelor of Science">
                          </div>

                          <div class="form-grid">
                              <div class="form-group">
                                  <label for="year_of_study" class="form-label">Year of Study</label>
                                  <select id="year_of_study" name="year_of_study" class="form-select">
                                      <option value="">Select year</option>
                                      <option value="1" <%= student && student.year_of_study === 1 ? 'selected' : '' %>>1st Year</option>
                                      <option value="2" <%= student && student.year_of_study === 2 ? 'selected' : '' %>>2nd Year</option>
                                      <option value="3" <%= student && student.year_of_study === 3 ? 'selected' : '' %>>3rd Year</option>
                                      <option value="4" <%= student && student.year_of_study === 4 ? 'selected' : '' %>>4th Year</option>
                                  </select>
                              </div>

                              <div class="form-group">
                                  <label for="semester" class="form-label">Current Semester</label>
                                  <select id="semester" name="semester" class="form-select">
                                      <option value="">Select semester</option>
                                      <option value="1" <%= student && student.semester === 1 ? 'selected' : '' %>>1st Semester</option>
                                      <option value="2" <%= student && student.semester === 2 ? 'selected' : '' %>>2nd Semester</option>
                                  </select>
                              </div>
                          </div>

                          <div class="form-grid">
                              <div class="form-group">
                                  <label for="batch_year" class="form-label">Batch Year</label>
                                  <input type="number" id="batch_year" name="batch_year" class="form-input" 
                                         value="<%= student ? student.batch_year : '' %>" 
                                         placeholder="e.g., 2024" min="2020" max="2030">
                              </div>

                              <div class="form-group">
                                  <label for="cgpa" class="form-label">CGPA</label>
                                  <input type="number" id="cgpa" name="cgpa" class="form-input" 
                                         value="<%= student ? student.cgpa : '' %>" step="0.01" min="0" max="4">
                              </div>
                          </div>
                      </div>

                      <div class="card-header" style="margin-top: 1.5rem; border-top: 1px solid var(--gray-200);">
                          <h3 class="card-title">Parent/Guardian Information</h3>
                      </div>
                      <div class="card-body">
                          <div class="form-group">
                              <label for="parent_name" class="form-label">Parent/Guardian Name</label>
                              <input type="text" id="parent_name" name="parent_name" class="form-input" 
                                     value="<%= student ? student.parent_name : '' %>" 
                                     placeholder="Parent/Guardian name">
                          </div>

                          <div class="form-group">
                              <label for="parent_phone" class="form-label">Parent/Guardian Phone Number</label>
                              <input type="tel" id="parent_phone" name="parent_phone" class="form-input" 
                                     value="<%= student ? student.parent_phone : '' %>" 
                                     placeholder="Parent/Guardian phone">
                          </div>
                      </div>
                  </div>
              </div>

              <!-- Submit Button -->
              <div style="text-align: center; margin-top: 2rem;">
                  <button type="submit" class="btn btn-primary" style="padding: 1rem 2rem; font-size: 1.1rem;">
                      <%= student ? 'Update Profile' : 'Create Profile' %>
                  </button>
              </div>
          </form>
      </div>
  </div>
</body>
</html>
